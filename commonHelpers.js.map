{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render.js","../src/js/on-form-submit.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('.form-input'),\n  btn: document.querySelector('.form-btn'),\n  gallery: document.querySelector('.gallery'),\n  load_more: document.querySelector('.load-more-button'),\n  loader: document.querySelector('.load'),\n};\n","import axios from 'axios';\nimport { refs } from './refs';\n\nexport async function pixabayApi(textFromUser, page, per_page) {\n  refs.loader.classList.add('loader');\n  const API_KEY = '42331479-49dc52f8d5778d01c5913f31a';\n  return await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: textFromUser,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page,\n      page,\n    },\n  });\n}\n","import { refs } from './refs';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nfunction templateGallery(obj) {\n  const template = obj.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"/>\n    <ul class=\"item-data-list\">\n    <li class=\"data-list-item\">\n    <h3 class=\"data-item-header\">Likes</h3>\n    <p class=\"data-item-text\">${likes}</p>\n    </li>\n    <li class=\"data-list-item\">\n    <h3 class=\"data-item-header\">Views</h3>\n    <p class=\"data-item-text\">${views}</p>\n    </li>\n    <li class=\"data-list-item\">\n    <h3 class=\"data-item-header\">Comments</h3>\n    <p class=\"data-item-text\">${comments}</p>\n    </li>\n    <li class=\"data-list-item\">\n    <h3 class=\"data-item-header\">Downloads</h3>\n    <p class=\"data-item-text\">${downloads}</p>\n    </li>\n    </ul>\n    </a>\n    </li>`;\n      }\n    )\n    .join('');\n  return template;\n}\n\nlet gallery = new SimpleLightbox('.gallery a');\n\nexport function galleryMarkup(obj) {\n  const markup = templateGallery(obj);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n","import { pixabayApi } from './pixabay-api';\nimport { refs } from './refs';\nimport { galleryMarkup } from './render';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nfunction hideLoader() {\n  refs.load_more.classList.add('hidden');\n}\nfunction showLoader() {\n  refs.load_more.classList.remove('hidden');\n}\n\nlet per_page = 9;\nlet page;\nlet inputValue;\n\nexport function onFormSubmit(e) {\n  e.preventDefault();\n  hideLoader();\n  inputValue = e.target.elements.form_input.value.trim();\n  page = 1;\n  refs.gallery.innerHTML = '';\n  if (inputValue !== '') {\n    pixabayApi(inputValue, page, per_page)\n      .then(response => {\n        const { data } = response;\n        if (data.hits.length !== 0) {\n          galleryMarkup(data);\n          let rect = refs.gallery.firstChild.getBoundingClientRect().height;\n          window.scrollBy({\n            behavior: 'smooth',\n            top: rect,\n          });\n          if (Math.ceil(data.totalHits / per_page) <= page) {\n            iziToast.show({\n              message:\n                \"We're sorry, but you've reached the end of search results.\",\n            });\n          } else {\n            showLoader();\n          }\n        } else {\n          iziToast.show({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        }\n      })\n      .catch(error => console.log(error))\n      .finally(refs.loader.classList.remove('loader'));\n  }\n  e.target.reset();\n}\n\nexport function onLoadMoreClick() {\n  page += 1;\n  pixabayApi(inputValue, page, per_page)\n    .then(response => {\n      const { data } = response;\n\n      galleryMarkup(data);\n      if (Math.ceil(data.totalHits / per_page) === page) {\n        hideLoader();\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    })\n    .finally(refs.loader.classList.remove('loader'));\n}\n","import { refs } from './js/refs';\nimport { onFormSubmit } from './js/on-form-submit';\nimport { onLoadMoreClick } from './js/on-form-submit';\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.load_more.addEventListener('click', onLoadMoreClick);\n"],"names":["refs","pixabayApi","textFromUser","page","per_page","API_KEY","axios","templateGallery","obj","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","SimpleLightbox","galleryMarkup","markup","hideLoader","showLoader","inputValue","onFormSubmit","e","response","data","rect","iziToast","error","onLoadMoreClick"],"mappings":"owBAAO,MAAMA,EAAO,CAClB,KAAM,SAAS,cAAc,cAAc,EAC3C,MAAO,SAAS,cAAc,aAAa,EAC3C,IAAK,SAAS,cAAc,WAAW,EACvC,QAAS,SAAS,cAAc,UAAU,EAC1C,UAAW,SAAS,cAAc,mBAAmB,EACrD,OAAQ,SAAS,cAAc,OAAO,CACxC,ECJO,eAAeC,EAAWC,EAAcC,EAAMC,EAAU,CAC7DJ,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClC,MAAMK,EAAU,qCAChB,OAAO,MAAMC,EAAM,IAAI,2BAA4B,CACjD,OAAQ,CACN,IAAKD,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAAE,EACA,KAAAD,CACD,CACL,CAAG,CACH,CCbA,SAASI,EAAgBC,EAAK,CAqC5B,OApCiBA,EAAI,KAClB,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,eACAL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,gCAIrCC,CAAK;AAAA;AAAA;AAAA;AAAA,gCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,gCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,gCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,UAMpC,EACA,KAAK,EAAE,CAEZ,CAEA,IAAIC,EAAU,IAAIC,EAAe,YAAY,EAEtC,SAASC,EAAcV,EAAK,CACjC,MAAMW,EAASZ,EAAgBC,CAAG,EAClCR,EAAK,QAAQ,mBAAmB,YAAamB,CAAM,EACnDH,EAAQ,QAAO,CACjB,CC3CA,SAASI,GAAa,CACpBpB,EAAK,UAAU,UAAU,IAAI,QAAQ,CACvC,CACA,SAASqB,GAAa,CACpBrB,EAAK,UAAU,UAAU,OAAO,QAAQ,CAC1C,CAEA,IAAII,EAAW,EACXD,EACAmB,EAEG,SAASC,EAAaC,EAAG,CAC9BA,EAAE,eAAc,EAChBJ,IACAE,EAAaE,EAAE,OAAO,SAAS,WAAW,MAAM,OAChDrB,EAAO,EACPH,EAAK,QAAQ,UAAY,GACrBsB,IAAe,IACjBrB,EAAWqB,EAAYnB,EAAMC,CAAQ,EAClC,KAAKqB,GAAY,CAChB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EACjB,GAAIC,EAAK,KAAK,SAAW,EAAG,CAC1BR,EAAcQ,CAAI,EAClB,IAAIC,EAAO3B,EAAK,QAAQ,WAAW,sBAAuB,EAAC,OAC3D,OAAO,SAAS,CACd,SAAU,SACV,IAAK2B,CACjB,CAAW,EACG,KAAK,KAAKD,EAAK,UAAYtB,CAAQ,GAAKD,EAC1CyB,EAAS,KAAK,CACZ,QACE,4DAChB,CAAa,EAEDP,GAEZ,MACUO,EAAS,KAAK,CACZ,QACE,0EACd,CAAW,CAEX,CAAO,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ7B,EAAK,OAAO,UAAU,OAAO,QAAQ,CAAC,EAEnDwB,EAAE,OAAO,OACX,CAEO,SAASM,GAAkB,CAChC3B,GAAQ,EACRF,EAAWqB,EAAYnB,EAAMC,CAAQ,EAClC,KAAKqB,GAAY,CAChB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAEjBP,EAAcQ,CAAI,EACd,KAAK,KAAKA,EAAK,UAAYtB,CAAQ,IAAMD,IAC3CiB,IACAQ,EAAS,KAAK,CACZ,QAAS,4DACnB,CAAS,EAET,CAAK,EACA,QAAQ5B,EAAK,OAAO,UAAU,OAAO,QAAQ,CAAC,CACnD,CCpEAA,EAAK,KAAK,iBAAiB,SAAUuB,CAAY,EACjDvB,EAAK,UAAU,iBAAiB,QAAS8B,CAAe"}